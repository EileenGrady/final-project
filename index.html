<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Industrial Pollution</title>

    <!-- title bar -->
    <!-- <nav class="navbar navbar-dark bg-dark navbar-fixed-top">
        <span class="navbar-brand mb-0 h1">Exploring Industrial Pollution in the US</span>
    </nav> -->
    <main>
    
        <!-- OPTIONAL: Scrollytelling Intro -->
        <section id="intro">
            <p><br></p>
            <h1 style="text-align:center">Exploring Industrial Pollution in the US</h1>
            <p>In 1969, the burning of the Cuyahoga River in Cleveland, Ohio became a national symbol for the publicâ€™s outcry against industrial pollution. The public had been expressing increasing concern throughout the 1950s and 1960s, and the US reached a turning point when the Environmental Protection Agency was established in 1970. The EPA began to monitor and enforce the increasing number of environmental laws passed by Congress aimed at reducing industrial pollution. Today there are two main programs in place that monitor industrial pollution in the United States.</p>
            <p><br></p>
          </section>    

    <!-- Main Scrollytelling Section -->
    <section id="scrollytelling">

        <!-- Map  -->
        <figure>
            <div id="map"></div>
        </figure>
  
        <!-- Prose for the project, additional info describing each scene. -->
        <article>
          <!-- Each div must have the class that you specify in the myScrollama.setup() -->
  
          <!-- Scene 1 -->
          <div class="step">
            <p>The Superfund program is responsible for the investigation and clean-up of contaminated sites left over from decades of unregulated industrial manufacturing and other activities. The most highly contaminated sites which require longer-term remedial action take precedence and are placed on the National Priority List (NPL).</p>
          </div>

          <!-- Scene 1a -->
          <div class="step">
            <p>Describe HRS--show top sites symbolozed by HRS</p>
          </div>

          <!-- Scene 1b -->
          <div class="step">
            <p>Briefly discuss clean-up efforts--show sites that do not have human exposure under control yet, leading into next two case studies.</p>
          </div>
          
          <!-- Scene 2 -->
          <div class="step">
            <p>GE Pittsfield Housatonic River Superfund Site</p>
            <p>From 1932 through 1977 at this site, General Electric manufactured and serviced electrical transformers containing PCBs. Years of PCB and industrial chemical use, and improper disposal, led to extensive contamination around Pittsfield, MA as well as down the entire length of the Housatonic River through Connecticut to the Long Island Sound.</p>
          </div>
  
          <!-- Scene 2a -->
          <div class="step">
            <p>zoom to georeferenced site map showing actual extent of site</p>
          </div>

          <!-- Scene 2b -->
          <div class="step">
            <p>then describe how pollution traveled all the way down Housatonic River--zoom out to entire river to show full extent of pollution.</p>
          </div>

          <!-- Scene 3 -->
          <div class="step">
            <p>Missouri's Old Lead Belt--show the seven specific sites</p>
          </div>

          <!-- Scene 3a -->
          <div class="step">
            <p>Zoom out to show all 4 county outlines and describe how the entire area is contaminated as a result of these 7 sites.</p>
          </div>

          <!-- Scene 4 -->
          <div class="step">
            <p>Toxic Release Inventory--show clusters of sites</p>
          </div>

         <!-- Scene 4a -->
          <div class="step">
            <p>Discuss complexity of system, determining hazard depends on toxicity weights and fate of chemical in environment, among other things--show top sites by RSEI score.</p>
          </div>

          <!-- Scene 5 -->
          <div class="step">
            <p>For example, an investigation into RSEI scores by direct water release, the Upper Tennessee watershed stands out with the second highest score of 1,138,280.</p>
          </div>

          <!-- Scene 5a -->
          <div class="step">
            <p>Upon further investigation, the largest share of this score can be traced back to one facility, the Eastman Chemical Co Tennessee Operations on the South Fork Holston River with a total RSEI score of 802,241 by direct water release, primarily from arsenic and dioxane. But what about facilities who don't report their releases properly?</p>
          </div>

          <!-- Scene 6 -->
          <div class="step">
            <p>Chemical Valley in West Virginia has a long history of industrial pollution.</p>
          </div>

          <!-- Scene 6a -->
          <div class="step">
            <p>2014 Elk River chemical spill. This site is not even on the TRI because it did not properly report or have permits to discharge into the river.</p>
          </div>

          <!-- Scene 6b -->
          <div class="step">
            <p>As a result, the water supply was poisoned for over 300,000 residents in nine counties.</p>
          </div>

          <!-- Scene 7 -->
          <div class="step">
            <p>Maybe show all facilities along waterways in the US here?</p>
          </div>

          <!-- Scene 8 -->
          <div class="step">
            <p>Look at CDC vulnerability index and find an area or two that would be most vulnerable in case of chemical spill?</p>
          </div>

          <!-- Scene 9 -->
          <div class="step">
            <p>Pollution on tribal lands--I found some discrepancies in reporting data and then the spatial analysis that I performed in QGIS that may be worth highlighting. First show all TRI facilities and Superfund sites that affect Native Americans according to the reported data.</p>
          </div>

          <!-- Scene 9a -->
          <div class="step">
            <p>Now show those sites plus the ones that actually fall on tribal lands in a QGIS count points in polygon analysis.</p>
          </div>

          <!-- Scene 10 -->
          <div class="step">
            <p>Looking at the maps in the previous two sections, maybe look at Oklahoma for a case study.</p>
          </div>

          <!-- Scene 11 -->
          <div class="step">
            <p>geocode option to find sites close to you?</p>
          </div>

        </article>
  
      </section>
  
      <!-- OPIONAL: Scrollytelling Outro --> 
      <section id="outro">
        <p style="text-align : center"><br><a href="#top">Jump to top of page</a><br></p>
      </section>
    
    </main>
  

    </section>
      
       

    <!-- Bootstrap core CSS -->
    <link href="vendor\bootstrap\css\bootstrap.min.css" rel="stylesheet">
    <!-- <link rel="stylesheet" href="https://unpkg.com/leaflet@1.6.0/dist/leaflet.css" /> -->
    <link href="https://api.mapbox.com/mapbox-gl-js/v1.10.0/mapbox-gl.css" rel="stylesheet" />
    <!-- Custom styles for this template -->
    <link href='css/style.css' rel='stylesheet' />
    <!-- <link rel="stylesheet" href="libs/Leaflet.markercluster/MarkerCluster.Default.css"> />
    <link rel="stylesheet" href="libs/Leaflet.markercluster/MarkerCluster.css"> /> -->
  </head>

  <body>

 
    
    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script>window.jQuery || document.write('<script src="../../../../assets/js/vendor/jquery-slim.min.js"><\/script>')</script>
    <script src="vendor/bootstrap/js/bootstrap.bundle.js"></script>
    <!-- <script src="https://unpkg.com/leaflet@1.6.0/dist/leaflet.js"></script> -->
    <!-- <script src='https://api.mapbox.com/mapbox.js/plugins/leaflet-omnivore/v0.3.1/leaflet-omnivore.min.js'></script> -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://unpkg.com/d3@5.9.1/dist/d3.min.js"></script>
    <script src="https://d3js.org/d3-fetch.v1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/scrollama/2.2.1/scrollama.min.js"></script>
    <!-- <script src="libs/Leaflet.markercluster/leaflet.markercluster.js"></script> -->
    <script src="https://api.mapbox.com/mapbox-gl-js/v1.10.0/mapbox-gl.js"></script>



    <!-- <script src='js/app.js'></script> -->

    <script>

    // declare all layers to be used in map in order to access outside of drawMap function
    // var superfundMarkers = L.markerClusterGroup();
    // var humanExposureLayer = []
    // var triMarkers = L.markerClusterGroup();
    // var leadBeltLayer = []
    // var housatonicRiverLayer = []
    // var HUC4Layer = []      
    // var HUC10Layer = []
    // var chemicalValleyLayer = []
    // var countySpillLayer = []
    // var naTRILayer = []
    // var naSuperfundLayer = []
    // var actualNaTriLayer = []
    // var acutalNaSuperfundLayer = []

    // // add mapbox access token
    // mapboxgl.accessToken = 'pk.eyJ1IjoiZWlsZWVuZ3JhZHkiLCJhIjoiY2s5dmd5bzJjMDA5ODNrcG9sdzgxY3dxNyJ9.o3V67yz8sFmnDzhGBkBLVg';

    // // initalize map
    // var map = new mapboxgl.Map({
    //   container: 'map', // container id
    //   style: 'mapbox://styles/mapbox/dark-v10', // stylesheet location
    //   center: [-107.79, 35.08], // starting position [lng, lat]
    //   zoom: 3.789, // starting zoom
    //   scrollZoom: false
    // });

    // call function to initiate scrollytelling code
    // init();
    
    // var map = L.map('map', {
    //         center: [36.686041276581925, -99.42626953125001],
    //         zoom: 5,
    //         scrollWheelZoom: false
    //     });



    // add basemap
    // L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png', {
    //     attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>',
    //     subdomains: 'abcd',
    //     maxZoom: 19
    // }).addTo(map);

    // load all data
    // const superfundData = d3.json('data/superfund-sites-new.geojson');
    // const triData = d3.json('data/tri-facilities.geojson');
    // const leadBeltData = d3.json('data/missouri-lead-belt.geojson');
    // const housatonicRiverData = d3.json('data/housatonic-river.geojson');
    // const HUC4Data = d3.json('data/watersheds/HUC4_simple.geojson');
    // const HUC10Data = d3.json('data/watersheds/HUC10-south-fork-holston.geojson');
    // const chemicalValleyData = d3.json('data/west-virginia-tri.geojson');
    // const countySpillData = d3.json('data/elk-river-spill-counties_WGS84.geojson');
    // const naSuperfundData = d3.json('data/superfund-native-american.geojson');
    // const naTRIData = d3.json('data/tri-native-american.geojson');


    // Promise.all([superfundData, triData, leadBeltData, housatonicRiverData, HUC4Data, HUC10Data, chemicalValleyData, countySpillData, naSuperfundData, naTRIData]).then(dataReady)

    // // wait for all data to load
    // function dataReady(data) {

    //     // assign data to variables
    //     const superfund = data[0];
    //     const tri = data[1];
    //     const leadBelt = data[2];
    //     const housatonic = data[3];
    //     const HUC4 = data[4];
    //     const HUC10 = data[5];
    //     const chemicalValley = data[6];
    //     const countySpill = data[7];
    //     const naSuperfund = data[8];
    //     const naTRI = data[9];

    //     // call drawMap function, passing data variables to pull out of function
    //     drawMap(superfund, tri, leadBelt, housatonic, HUC4, HUC10, chemicalValley, countySpill, naSuperfund, naTRI);
        
    //     // call function to initiate scrollytelling code
    //     init();
    // }

    // // define draw map function that creates and styles all data layers
    // function drawMap(superfund, tri, leadBelt, housatonic, HUC4, HUC10, chemicalValley, countySpill, naSuperfund, naTRI) {
      
    //   // create superfund cluster layer
    //   superfund.features.forEach(function(feature) {
    //     var coords = feature.geometry.coordinates;
    //     marker = L.marker([coords[1], coords[0]]);
    //     superfundMarkers.addLayer(marker);
    //   });

    //   // create superfund layer only showing sites that do not have human exposure under control
    //   humanExposureLayer = L.geoJSON(superfund, {
    //     pointToLayer: function (feature, latlng) {
    //         return L.circleMarker(latlng, {
    //             weight: 1,
    //             radius: 3,
    //             color: "#c8ffc8",
    //             fillColor: "#66FF66",
    //             fillOpacity: 1
    //         })
    //     },
    //     filter: function (feature, layer) {
    //       return feature.properties.HUMAN_EXPOSURE_UNDER_CONTROL == "No";
    //     }
    //   });          

    //   // create TRI facility cluster layer
    //   tri.features.forEach(function(feature) {
    //     var coords = feature.geometry.coordinates;
    //     marker = L.marker([coords[1], coords[0]]);
    //     triMarkers.addLayer(marker);
    //   })
    
    //   // create layer showing counties in Missouri's old lead belt
    //   leadBeltLayer = L.geoJSON(leadBelt, {
    //       style: function (feature) {
    //         return {color: "#FF9933"}
    //       }
    //     });

    //     // create Housatonic river layer
    //     housatonicRiverLayer = L.geoJSON(housatonic, {
    //       style: function (feature) {
    //         return {color: "#4666FF", weight: 3}
    //       }
    //     });

    //     // create Upper Tennesee HUC4 watershed layer
    //     HUC4Layer = L.geoJSON(HUC4, {
    //       style: function (feature) {
    //         return {color: "#4666FF"}
    //       }
    //     });

    //     // create South Fork Holston HUC10 watershed layer
    //     HUC10Layer = L.geoJSON(HUC10, {
    //       style: function (feature) {
    //         return {color: "#4666FF"}
    //       }
    //     });

    //     // create layer showing TRI facilities in West Virginia
    //     chemicalValleyLayer = L.geoJSON(chemicalValley, {
    //       pointToLayer: function (feature, latlng) {
    //           return L.circleMarker(latlng, {
    //               weight: 1,
    //               radius: 3,
    //               color: "#ffad5a",
    //               fillColor: "#FF9933",
    //               fillOpacity: 1
    //           })
    //       }
    //     });

    //     // create layer showing counties affected by Elk River spill
    //     countySpillLayer = L.geoJSON(countySpill, {
    //       style: function (feature) {
    //         return {color: "#4666FF"}
    //       }
    //     });

    //     // create layer showing TRI facilities reported as falling on tribal land
    //     naTRILayer = L.geoJSON(tri, {
    //       pointToLayer: function (feature, latlng) {
    //           return L.circleMarker(latlng, {
    //               weight: 1,
    //               radius: 3,
    //               color: "#c8ffc8",
    //               fillColor: "#66FF66",
    //               fillOpacity: 1
    //           })
    //       },
    //       filter: function (feature, layer) {
    //         // filter showing facilities that DO NOT have a blank string in the TRIBE column
    //         return feature.properties.TRIBE != ""; 
    //       }
    //     });

    //     // create layer showing superfund sites reported as of interest to Native Americans
    //     naSuperfundLayer = L.geoJSON(superfund, {
    //       pointToLayer: function (feature, latlng) {
    //           return L.circleMarker(latlng, {
    //               weight: 1,
    //               radius: 3,
    //               color: "#c8ffc8",
    //               fillColor: "#FF6347",
    //               fillOpacity: 1
    //           })
    //       },
    //       filter: function (feature, layer) {
    //         return feature.properties.NATIVE_AMERICAN_INTEREST == "Yes";
    //       }
    //     }); 

    //     // create layer of superfund sites reported as of interest to Native Americans
    //     // in addition to the ones that actually fall within a Native American reservation
    //     acutalNaSuperfundLayer = L.geoJSON(naSuperfund, {
    //       pointToLayer: function (feature, latlng) {
    //           return L.circleMarker(latlng, {
    //               weight: 1,
    //               radius: 3,
    //               color: "#ffad5a",
    //               fillColor: "#FF6347",
    //               fillOpacity: 1
    //           })
    //       }
    //       });

    //     // create layer of TRI facilities reported to fall on tribal lands
    //     // in addition to the ones that actually fall within a Native American reservation
    //     actualNaTriLayer = L.geoJSON(naTRI, {
    //       pointToLayer: function (feature, latlng) {
    //           return L.circleMarker(latlng, {
    //               weight: 1,
    //               radius: 3,
    //               color: "#ffad5a",
    //               fillColor: "#66FF66",
    //               fillOpacity: 1
    //           })
    //       }
    //       });
    //   }


 // ---------Section 0: Make a scrollama--------------- 
  // Create a scrollama object.
  // ---------------------------------------------------
  var myScrollama = scrollama();

  // ---------Section 1: Set Heights---------------
  //#region
  // Set the size of the figure and the height of the steps
  // These are set to constants to improve performance on mobile devices, while keeping the code relatively simple.
  // ----------------------------------------------
  const figureHeight = window.innerHeight * 0.8
  const figureMarginTop = (window.innerHeight - figureHeight) / 2
  const stepH = Math.floor(window.innerHeight * 1.8);
  //#endregion

  // ---------Section 2: HTML -> D3--------------- 
  //#region
  // Save different parts of the page as D3.js objects. We'll use these later for easy restyling. D3.js is used for convenience.
  // ---------------------------------------------
  var figure = d3.select('figure');

  var article = d3.select('article');
  var steps = d3.selectAll('.step');
  //#endregion

  // ---------Section 3: handleResize()---------------
  //#region
  // Create a function which sets the styling of the various elements exactly as you want it to appear
  // This function could increase in complexity as you build responsive scrollytelling webpages. Here, this function
  // is relatively simple.
  // -------------------------------------------------
  function handleResize() {
    
    console.log("handling resize")

    // 1. update height of step elements
    steps.style('height', stepH + 'px');

    // 2. update height, margin, and layering of the figure
    figure
      .style('height', figureHeight + 'px')
      .style('top', figureMarginTop + 'px')
      .style("z-index", 1);

    // 3. force the article to appear on top of the figure
    article.style("z-index", 2);

    // 4. tell scrollama to update new element dimensions. Not always necessary, but included just to be safe.
    myScrollama.resize();

  }
  //#endregion

  // ---------Section 4: handleStepChange()---------------
  // Create a function to update the map in response to step-triggers.
  // setting map view, and removing and adding layers
  // this gets a little complicated/clunky and I'm not sure this is the best way to proceed
  // -----------------------------------------------------
  function handleStepChange(response) {
  
    console.log(response)

    // create array of layers to be turned off in each case before adding back relevant layers
    const allLayers = ['superfund-sites', 'tri-facilities', 'ge-layer', 'housatonic-layer', 'lead-belt-layer']

    // create array of individual markers to be removed in each case before adding back relevant markers
    const allMarkers = [geMarker]

    switch(response.index) {
      case 0:
        // Scene 1
        // Superfund sites
        allLayers.forEach(item => map.setLayoutProperty(item, 'visibility', 'none'));
        allMarkers.forEach(item => item.remove());
        map.setLayoutProperty('superfund-sites','visibility', 'visible');
        break;

      case 1:
        // Scene 1a
        // Top superfund sites by HRS score

        break;

      case 2:
        // Scene 1b
        // Superfund sites--human exposure not under control
        break;

      case 3:
        // Scene 2
        // GE Pittsfield Site
        map.flyTo({
          center: [-73.247877, 42.449629],
          zoom: 13,
          pitch: 0,
          bearing: 0
        });
        allLayers.forEach(item => map.setLayoutProperty(item, 'visibility', 'none'));
        allMarkers.forEach(item => item.remove());
        map.once('moveend', function(e) {
          geMarker.addTo(map);
        });
        break;
      
      case 4:
        // Scene 2a
        // Full GE site extent map
        map.flyTo({
          center: [-73.2339, 42.453], 
          zoom: 14,
          pitch: 31.4999,
          bearing: 0
        });
        allLayers.forEach(item => map.setLayoutProperty(item, 'visibility', 'none'));
        allMarkers.forEach(item => item.remove());
        map.setLayoutProperty('ge-layer','visibility', 'visible');
        break;

      case 5:
        // Scene 2b
        // Housatonic River extent
        map.flyTo({
          center: [-73.66980, 41.40002], 
          zoom: 8.73,
          pitch: 28,
          bearing: -33.54
        });
        allLayers.forEach(item => map.setLayoutProperty(item, 'visibility', 'none'));
        allMarkers.forEach(item => item.remove());
        map.setLayoutProperty('housatonic-layer','visibility', 'visible');

        break;

      case 6:
        // Scene 3
        // Missouri Old Lead Belt sites

        break;

      case 7:
        // Scene 3a
        // Missouri Old Lead Belt areas
        map.flyTo({
          center: [-90.97511, 37.98508], 
          zoom: 8,
          pitch: 0,
          bearing: 0
        });
        allLayers.forEach(item => map.setLayoutProperty(item, 'visibility', 'none'));
        allMarkers.forEach(item => item.remove());
        map.setLayoutProperty('lead-belt-layer','visibility', 'visible');
        break;

      case 8:
        // Scene 4
        // TRI facility cluster
        map.flyTo({
          center: [-107.79, 35.08],
          zoom: 3.789
        });
        allLayers.forEach(item => map.setLayoutProperty(item, 'visibility', 'none'));
        allMarkers.forEach(item => item.remove());
        map.setLayoutProperty('tri-facilities','visibility', 'visible');
        break;

      case 9:
        // Scene 4a
        // TRI top facilities by RSEI score
  
        break;

      case 10:
        // Scene 5
        // Upper Tennessee Watershed
        // map.setView([36.686041276581925, -99.42626953125001], 5)
   
        break;

        case 11:
        // Scene 5a
        // South Fork-Holston Watershed and Eastman Chemical Co Tennessee Operations facility
        
        break;

        case 12:
        // Scene 6
        // Chemical Valley in West Virginia
    
        break;
        
        case 13:
        // Scene 6a
        // Zoom to Freedom Industry facility that had chemical spill
      
        break;

        case 14:
        // Scene 6b
        // show counties affected by spill
   
        break;

        case 15:
        // Scene 7
        // all facilities along waterways in US?
      
        break;

        case 16:
        // Scene 8
        // CDC vulnerability index?
   
        break;

        case 17:
        // Scene 9
        // Pollution on tribal lands--first show everything reported by EPA
   
       
        break;

        case 18:
        // Scene 9a
        // then show all sites that actually fall on tribal lands
       
       
        break;

        case 19:
        // Scene 9b
        // a case study?
      
        break;

      default:
        // do nothing

    }

  }

  // ---------Section 5: init()--------------- 
  // Create a function that will run just once that first makes sure all the elements are sized like you want them,
  // and then sets up the scrollama. Finally, add an event listener to detect if the screen size has changed.
  // -----------------------------------------
  function init() {

    // 1. force a resize on load to ensure proper dimensions are sent to scrollama
    handleResize();

    // 2. Setup the scrollama
    myScrollama.setup({
      step: '.step',
      offset: Math.floor(window.innerHeight) * 0.95 + "px",
      // set to true to see debug horizontal line
      debug: true,
    }).onStepEnter(handleStepChange)
      
    // setup resize event
    window.addEventListener('resize', handleResize);
  }


  // ---------Section 6: Wrap Up--------------- 
  // This is where you'll want to include any other JavaScript that you've created for the webpage, and to run the init() function. 
  // ------------------------------------------
  // init();

  // add mapbox access token
  mapboxgl.accessToken = 'pk.eyJ1IjoiZWlsZWVuZ3JhZHkiLCJhIjoiY2pvNG00eXVjMDFlcjNxcW1yZ3I2OTJ2ZSJ9.l2EtBykdOJSCNiszd2NbaA';

  // initalize map
  var map = new mapboxgl.Map({
    container: 'map', // container id
    style: 'mapbox://styles/eileengrady/ck9vlhb4417hl1iqmcr1eoyr4', // stylesheet location
    center: [-107.79, 35.08], // starting position [lng, lat]
    zoom: 3.789, // starting zoom
    scrollZoom: false
  });

      // create marker for GE Pittsfield site
      var geMarker = new mapboxgl.Marker()
      .setLngLat([-73.232222, 42.450278])

  map.on('load', function() {

    // // create marker for GE Pittsfield site
    // var geMarker = new mapboxgl.Marker()
    //   .setLngLat([-73.232222, 42.450278])

    // add source and layer for GE Pittsfield site map
    map.addSource('ge-source', {
      type: 'geojson',
      data: 'data/ge-site-area.geojson'
    });

    map.addLayer({
      'id': 'ge-layer',
      'type': 'line',
      'source': 'ge-source',
      'layout': {
        'visibility': 'none'
      },
      'paint': {
        'line-color': '#FFCC33',
        'line-width': 2
      }
    });

    // add source and layer for Housatonic River
    map.addSource('housatonic-source', {
      type: 'geojson',
      data: 'data/housatonic-river.geojson'
    });

    map.addLayer({
      'id': 'housatonic-layer',
      'type': 'line',
      'source': 'housatonic-source',
      'layout': {
        'visibility': 'none'
      },
      'paint': {
        'line-color': '#50BFE6',
        'line-width': 2
      }
    });

    // add source and layer for Lead Belt sites
    map.addSource('lead-belt-source', {
      type: 'geojson',
      data: 'data/missouri-lead-belt.geojson'
    });

    map.addLayer({
      'id': 'lead-belt-layer',
      'type': 'line',
      'source': 'lead-belt-source',
      'layout': {
        'visibility': 'none'
      },
      'paint': {
        'line-color': '#50BFE6',
        'line-width': 2
      }
    });

    // // add source and layer for tri facilities
    // map.addSource('tri-facilities', {
    //   type: 'geojson',
    //   data: 'data/tri-facilities.geojson'
    // });

    // map.addLayer({
    //   'id': 'tri-layer',
    //   'type': 'circle',
    //   'source': 'tri-facilities',
    //   'layout': {
    //     'visibility': 'none'
    //   },
    //   'paint': {
    //     'circle-radius': 4,
    //     'circle-color': '#AAF0D1',
    //     'circle-opacity': .5
    //   }
    // })

    init();
  })



    
    </script>

    
  </body>
</html>
